#
# This config generates all artefacts except for EOS targets
#
common-gha-configs:
  armbian-gha: &armbian-gha
    runners:
      default: "fast"
      by-name:
        kernel: [ "self-hosted", "Linux", "alfa" ]
        uboot: [ "self-hosted", "Linux", "fast", "X64" ]
        armbian-bsp-cli: [ "fast" ]
      by-name-and-arch:
        rootfs-armhf: [ "self-hosted", "Linux", "ARM64" ]
        rootfs-arm64: [ "self-hosted", "Linux", "ARM64" ]
        rootfs-amd64: [ "self-hosted", "Linux", "X64" ]
        rootfs-riscv64: [ "self-hosted", "Linux", "X64" ]
        image-armhf: [ "self-hosted", "Linux", 'fast' ]
        image-arm64: [ "self-hosted", "Linux", 'fast' ]
        image-amd64: [ "self-hosted", "Linux", 'fast', "X64" ]
        image-riscv64: [ "self-hosted", "Linux", 'fast', "X64" ]

targets:
  all-desktop:
    enabled: no
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
    vars:
      BUILD_MINIMAL: "no"
      BUILD_DESKTOP: "yes"
      DESKTOP_ENVIRONMENT: "xfce"
      DESKTOP_ENVIRONMENT_CONFIG_NAME: "config_base"
      RELEASE: "jammy"
    items-from-inventory:
      #wip: yes # includes all work-in-progress boards
      #all: yes # includes all available BOARD and BRANCH combinations
      #conf: yes # includes all supported boards
      not-eos: yes # not-eos boards, all branches

  all-cli:
    enabled: yes
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
    vars:
      BUILD_MINIMAL: "yes"
      BUILD_DESKTOP: "no"
      RELEASE: "lunar"
    items-from-inventory:
      #wip: yes # includes all work-in-progress boards
      #all: yes # includes all available BOARD and BRANCH combinations
      #conf: yes # includes all supported boards
      not-eos: yes # not-eos boards, all branches
