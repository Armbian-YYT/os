#
# Armbian release template for automated generation. DO NOT EDIT .yaml files. Edit .template
#

common-gha-configs:
  armbian-gha: &armbian-gha
    runners:
      default: "ubuntu-latest" # or a ["tag", "list"]
      by-name:
        kernel: [ "self-hosted", "Linux", "alfa" ]
        uboot: [ "self-hosted", "Linux", "fast", "X64" ]
        armbian-bsp-cli: [ "fast" ]
      by-name-and-arch:
        rootfs-armhf: [ "self-hosted", "Linux", "ARM64" ]
        rootfs-arm64: [ "self-hosted", "Linux", "ARM64" ]
        rootfs-amd64: [ "self-hosted", "Linux", "X64" ]
        rootfs-riscv64: [ "self-hosted", "Linux", "X64" ]
        image-armhf: [ "self-hosted", "Linux", 'fast' ]
        image-arm64: [ "self-hosted", "Linux", 'fast' ]
        image-amd64: [ "self-hosted", "Linux", 'fast', "X64" ]
        image-riscv64: [ "self-hosted", "Linux", 'fast', "X64" ]

lists:

  unsupported: &unsupported
    # debian stable cli
    # ubuntu stable xfce desktop
    # unsupported-hdmi

  headless: &headless
    # debian stable minimal
    # debian stable cli
    # ubuntu stable minimal
    # ubuntu stable cli
    # unsupported-headless
    - { BOARD: bananapir2, BRANCH: legacy}
    - { BOARD: clearfogbase, BRANCH: current }
    - { BOARD: clearfogpro, BRANCH: current }
    - { BOARD: cubieboard, BRANCH: current }
    - { BOARD: espressobin, BRANCH: current }
    - { BOARD: helios4, BRANCH: current }
    - { BOARD: lime-a33, BRANCH: current }
    - { BOARD: macchiatobin-doubleshot, BRANCH: current }
    - { BOARD: melea1000, BRANCH: current }
    - { BOARD: mk808c, BRANCH: current }
    - { BOARD: nanopiair, BRANCH: current }
    - { BOARD: nanopineo2black, BRANCH: current }
    - { BOARD: nanopineo2, BRANCH: current }
    - { BOARD: nanopineo3, BRANCH: current }
    - { BOARD: nanopineocore2, BRANCH: current }
    - { BOARD: nanopineo, BRANCH: current }
    - { BOARD: nanopineoplus2, BRANCH: current }
    - { BOARD: nanopi-r1, BRANCH: current }
    - { BOARD: nanopi-r1s-h5, BRANCH: current }
    - { BOARD: nanopi-r2c, BRANCH: current }
    - { BOARD: nanopi-r2s, BRANCH: current }
    - { BOARD: nanopi-r4se, BRANCH: current }
    - { BOARD: olinux-som-a13, BRANCH: current }
    - { BOARD: orangepi-r1plus, BRANCH: current }
    - { BOARD: orangepizeroplus2-h5, BRANCH: current }
    - { BOARD: pinecube, BRANCH: current }
    - { BOARD: rockpi-s, BRANCH: current }
    - { BOARD: zeropi, BRANCH: current }

targets:

  # debian cli

  full-cli-stable-debian:
    enabled: yes
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
      build-image: "yes"
    vars:
      RELEASE: bookworm
      BUILD_MINIMAL: "no"
      BUILD_DESKTOP: "no"
    items:
      - *unsupported
      - *headless

  # ubuntu cli

  full-cli-stable-ubuntu:
    enabled: yes
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
      build-image: "yes"
    vars:
      RELEASE: jammy
      BUILD_MINIMAL: "no"
      BUILD_DESKTOP: "no"
    items:
      - *headless

  # ubuntu xfce

  xfce-desktop-stable-ubuntu:
    enabled: yes
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
      build-image: "yes"
    vars:
      RELEASE: jammy
      BUILD_MINIMAL: "no"
      DESKTOP_ENVIRONMENT: "xfce"
      BUILD_DESKTOP: "yes"
      DESKTOP_ENVIRONMENT_CONFIG_NAME: "config_base"
      DESKTOP_APPGROUPS_SELECTED: "desktop_tools,internet,languages,multimedia,office,programming,remote_desktop"
    items:
      - *unsupported

