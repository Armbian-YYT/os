common-gha-configs:
  armbian-gha: &armbian-gha
    runners:
      default: "fast" # or a ["tag", "list"]
      by-name:
        kernel: [ "self-hosted", "Linux", "alfa" ]
        uboot: [ "self-hosted", "Linux", "fast" ]
        armbian-bsp-cli: [ "ubuntu-latest" ]
      by-name-and-arch:
        rootfs-armhf: [ "self-hosted", "Linux", "ARM64" ]
        rootfs-arm64: [ "self-hosted", "Linux", "ARM64" ]
        rootfs-amd64: [ "self-hosted", "Linux", "X64" ]
        image-armhf: [ "self-hosted", "Linux", 'fast', "ARM64" ]
        image-arm64: [ "self-hosted", "Linux", 'fast', "ARM64" ]
        image-amd64: [ "self-hosted", "Linux", 'fast', "X64" ]

lists:

  full-desktop: &full-desktop

    - { BOARD: firefly-rk3399, BRANCH: current }
    - { BOARD: jetson-nano, BRANCH: current }
    - { BOARD: khadas-vim1, BRANCH: current }
    - { BOARD: khadas-vim2, BRANCH: current }
    - { BOARD: khadas-vim3, BRANCH: current }
    - { BOARD: khadas-vim3l, BRANCH: current }
    - { BOARD: lafrite, BRANCH: current }
    - { BOARD: lepotato, BRANCH: current }
    - { BOARD: nanopct4, BRANCH: current }
    - { BOARD: nanopim4, BRANCH: current }
    - { BOARD: odroidc2, BRANCH: current }
    - { BOARD: odroidc4, BRANCH: current }
    - { BOARD: odroidhc4, BRANCH: current }
    - { BOARD: odroidn2, BRANCH: current }
    - { BOARD: orangepi4, BRANCH: current }
    - { BOARD: orangepi4-lts, BRANCH: current }
    - { BOARD: orangepi5, BRANCH: legacy }
    - { BOARD: pinebook-pro, BRANCH: current }
    - { BOARD: renegade, BRANCH: current }
    - { BOARD: rock-3a, BRANCH: current }
    - { BOARD: rock-5b, BRANCH: legacy }
    - { BOARD: rock64, BRANCH: current }
    - { BOARD: rockpi-4a, BRANCH: current }
    - { BOARD: rockpi-4b, BRANCH: current }
    - { BOARD: rockpi-4c, BRANCH: current }
    - { BOARD: rockpro64, BRANCH: current }
    - { BOARD: station-m1, BRANCH: current }
    - { BOARD: station-m2, BRANCH: current }
    - { BOARD: station-m3, BRANCH: legacy }
    - { BOARD: station-p1, BRANCH: current }
    - { BOARD: station-p2, BRANCH: current }

  light-desktop: &light-desktop

    - { BOARD: bananapir2pro, BRANCH: current }
    - { BOARD: odroidxu4, BRANCH: current }
    - { BOARD: orangepiplus2e, BRANCH: current }
    - { BOARD: pine64, BRANCH: current }
    - { BOARD: radxa-zero, BRANCH: current }
    - { BOARD: tinkerboard, BRANCH: current }
    - { BOARD: tritium-h3, BRANCH: current }

  headless: &headless

    - { BOARD: bananapicm4io, BRANCH: current }
    - { BOARD: clearfogbase, BRANCH: current }
    - { BOARD: clearfogpro, BRANCH: current }
    - { BOARD: cubieboard, BRANCH: current }
    - { BOARD: espressobin, BRANCH: current }
    - { BOARD: helios4, BRANCH: current }
    - { BOARD: nanopiduo, BRANCH: current }
    - { BOARD: nanopineo2black, BRANCH: current }
    - { BOARD: nanopineo2, BRANCH: current }
    - { BOARD: nanopineo3, BRANCH: current }
    - { BOARD: nanopineo, BRANCH: current }
    - { BOARD: nanopineoplus2, BRANCH: current }
    - { BOARD: nanopi-r1, BRANCH: current }
    - { BOARD: nanopi-r1s-h5, BRANCH: current }
    - { BOARD: nanopi-r2c, BRANCH: current }
    - { BOARD: nanopi-r2s, BRANCH: current }
    - { BOARD: nanopi-r4s, BRANCH: current }
    - { BOARD: orangepi-r1, BRANCH: current }
    - { BOARD: orangepi-r1plus, BRANCH: current }
    - { BOARD: orangepi-r1plus-lts, BRANCH: current }
    - { BOARD: orangepizero2, BRANCH: current }
    - { BOARD: orangepizero, BRANCH: current }
    - { BOARD: orangepizeroplus, BRANCH: current }
    - { BOARD: pine64so, BRANCH: current }
    - { BOARD: rockpi-e, BRANCH: current }
    - { BOARD: rockpi-s, BRANCH: current }

targets:
  all:
    enabled: no # DISABLED! for now
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
    vars:
      BUILD_MINIMAL: "no"
      BUILD_DESKTOP: "yes"
      DESKTOP_ENVIRONMENT: "xfce"
      DESKTOP_ENVIRONMENT_CONFIG_NAME: "config_base"
      RELEASE: "jammy"
    items-from-inventory:
      not-eos: "yes"

  minimal-cli-stable-debian:
    enabled: no
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
      build-image: "yes"
    vars:
      RELEASE: bookworm
      BUILD_MINIMAL: "yes"
      BUILD_DESKTOP: "no"
    items:
      - *full-desktop
      - *light-desktop
      - *headless

  full-cli-stable-debian:
    enabled: no
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
      build-image: "yes"
    vars:
      RELEASE: bookworm
      BUILD_MINIMAL: "no"
      BUILD_DESKTOP: "no"
    items:
      - *full-desktop
      - *light-desktop
      - *headless

  minimal-cli-stable-ubuntu:
    enabled: yes
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
      build-image: "yes"
    vars:
      RELEASE: jammy
      BUILD_MINIMAL: "yes"
      BUILD_DESKTOP: "no"
    items:
#      - *full-desktop
#      - *light-desktop
#      - *headless
      - { BOARD: rpi4b, BRANCH: current }

  full-cli-stable-ubuntu:
    enabled: no
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
      build-image: "yes"
    vars:
      RELEASE: jammy
      BUILD_MINIMAL: "no"
      BUILD_DESKTOP: "no"
    items:
      - *full-desktop
      - *light-desktop
      - *headless
      - { BOARD: rpi4b, BRANCH: current }

  minimal-desktop-stable-ubuntu:
    enabled: no
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
      build-image: "yes"
    vars:
      RELEASE: jammy
      BUILD_MINIMAL: "no"
      DESKTOP_ENVIRONMENT: "xfce"
      BUILD_DESKTOP: "yes"
      DESKTOP_ENVIRONMENT_CONFIG_NAME: "config_base"
      DESKTOP_APPGROUPS_SELECTED: "browsers"
    items:
      - *full-desktop
      - *light-desktop
      - { BOARD: rpi4b, BRANCH: current }

  full-desktop-stable-ubuntu:
    enabled: no
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
      build-image: "yes"
    vars:
      RELEASE: jammy
      BUILD_MINIMAL: "no"
      DESKTOP_ENVIRONMENT: "gnome"
      BUILD_DESKTOP: "yes"
      DESKTOP_ENVIRONMENT_CONFIG_NAME: "config_base"
      DESKTOP_APPGROUPS_SELECTED: "browsers,chat,desktop_tools,editors,email,internet,languages,multimedia,office,programming,remote_desktop"
    items:
#      - *full-desktop
      - { BOARD: rpi4b, BRANCH: current }
