common-gha-configs:
  armbian-gha: &armbian-gha
    runners:
      default: "ubuntu-latest" # or a ["tag", "list"]
      by-name:
        kernel: [ "self-hosted", "Linux", "alfa" ]
        uboot: [ "self-hosted", "Linux", "fast" ]
      by-name-and-arch:
        rootfs-arm64: [ "self-hosted", "Linux", "ARM64" ]
        rootfs-amd64: [ "self-hosted", "Linux", "X64" ]
        image-arm64: [ "self-hosted", "Linux", 'fast', "ARM64" ]
        image-amd64: [ "self-hosted", "Linux", 'fast', "X64" ]

lists:

  supported: &supported
    - { BOARD: bananapim5, BRANCH: current }
    - { BOARD: khadas-vim3, BRANCH: current }
    - { BOARD: orangepi5, BRANCH: legacy }

targets:
  all:
    enabled: no # DISABLED! for now
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
    vars:
      BUILD_MINIMAL: "no"
      BUILD_DESKTOP: "yes"
      DESKTOP_ENVIRONMENT: "xfce"
      DESKTOP_ENVIRONMENT_CONFIG_NAME: "config_base"
      RELEASE: "jammy"
    items-from-inventory:
      not-eos: "yes"

  minimal-cli-stable-debian:
    enabled: yes
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
      build-image: "yes"
    vars:
      RELEASE: bookworm
      BUILD_MINIMAL: "yes"
      BUILD_DESKTOP: "no"
#      DOCKER_ARMBIAN_BASE_IMAGE: "debian:bookworm"
    items: # simple hardcoded list
      - *supported

  full-cli-stable-debian:
    enabled: yes
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
      build-image: "yes"
    vars:
      RELEASE: bookworm
      BUILD_MINIMAL: "no"
      BUILD_DESKTOP: "no"
#      DOCKER_ARMBIAN_BASE_IMAGE: "debian:bookworm"
    items: # simple hardcoded list
      - *supported

  minimal-cli-stable-ubuntu:
    enabled: yes
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
      build-image: "yes"
    vars:
      RELEASE: jammy
      BUILD_MINIMAL: "yes"
      BUILD_DESKTOP: "no"
    items: # list of reference-lists
      - *supported
      - { BOARD: rpi4b, BRANCH: current }

  full-cli-stable-ubuntu:
    enabled: yes
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
      build-image: "yes"
    vars:
      RELEASE: jammy
      BUILD_MINIMAL: "no"
      BUILD_DESKTOP: "no"
    items: # list of reference-lists
      - *supported
      - { BOARD: rpi4b, BRANCH: current }

  minimal-desktop-stable-ubuntu:
    enabled: yes
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
      build-image: "yes"
    vars:
      RELEASE: jammy
      BUILD_MINIMAL: "no"
      DESKTOP_ENVIRONMENT: "xfce"
      BUILD_DESKTOP: "yes"
      DESKTOP_ENVIRONMENT_CONFIG_NAME: "config_base"
      DESKTOP_APPGROUPS_SELECTED: "browsers"
    items: # list of reference-lists
      - *supported
      - { BOARD: rpi4b, BRANCH: current }

  full-desktop-stable-ubuntu:
    enabled: yes
    configs: [ armbian-images ]
    pipeline:
      gha: *armbian-gha
      build-image: "yes"
    vars:
      RELEASE: jammy
      BUILD_MINIMAL: "no"
      DESKTOP_ENVIRONMENT: "gnome"
      BUILD_DESKTOP: "yes"
      DESKTOP_ENVIRONMENT_CONFIG_NAME: "config_base"
      DESKTOP_APPGROUPS_SELECTED: "browsers chat desktop_tools editors email internet languages multimedia office programming remote_desktop"
    items: # list of reference-lists
      - *supported
      - { BOARD: rpi4b, BRANCH: current }
